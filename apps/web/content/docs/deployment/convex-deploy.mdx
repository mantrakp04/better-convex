---
title: Convex Deployment
description: Deploying your Convex backend to production
---

# Convex Deployment

Deploy your Convex functions, schema, and configuration to production.

## Initial Setup

### Create Production Project

1. Go to [convex.dev/dashboard](https://convex.dev/dashboard)
2. Click "Create Project"
3. Name your project (e.g., `my-app-prod`)
4. Note the deployment URL

### Generate Deploy Key

For CI/CD deployments, generate a deploy key:

1. Open your project in the Convex dashboard
2. Go to Settings â†’ Deploy Keys
3. Click "Generate Deploy Key"
4. Copy and save the key securely

## Manual Deployment

Deploy from your local machine:

```bash
# Login to Convex (first time only)
bunx convex login

# Deploy to production
bunx convex deploy
```

Select your production project when prompted.

## CI/CD Deployment

### GitHub Actions

Create `.github/workflows/deploy.yml`:

```yaml
name: Deploy

on:
  push:
    branches: [main]

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      - uses: oven-sh/setup-bun@v1

      - name: Install dependencies
        run: bun install

      - name: Deploy Convex
        run: bunx convex deploy
        env:
          CONVEX_DEPLOY_KEY: ${{ secrets.CONVEX_DEPLOY_KEY }}
```

Add `CONVEX_DEPLOY_KEY` to your repository secrets.

### Vercel Integration

Convex integrates directly with Vercel:

1. Install the Convex integration from Vercel Marketplace
2. Connect your Convex project
3. Deployments happen automatically on push

## Schema Migrations

When you change your schema, Convex handles migrations:

### Adding Fields

New optional fields are added automatically:

```typescript
// Before
defineTable({
  name: v.string(),
})

// After - safe migration
defineTable({
  name: v.string(),
  email: v.optional(v.string()), // New optional field
})
```

### Required Field Changes

For required field changes, use a migration strategy:

```typescript
// 1. Add as optional
defineTable({
  name: v.string(),
  newField: v.optional(v.string()),
})

// 2. Backfill data with a migration mutation
export const migrateNewField = internalMutation({
  handler: async (ctx) => {
    const docs = await ctx.db.query("myTable").collect();
    for (const doc of docs) {
      if (!doc.newField) {
        await ctx.db.patch(doc._id, { newField: "default" });
      }
    }
  },
});

// 3. Make required after backfill
defineTable({
  name: v.string(),
  newField: v.string(), // Now required
})
```

## Deployment Verification

After deploying, verify your deployment:

### Check Functions

```bash
# List deployed functions
bunx convex functions
```

### Test Endpoints

Use the Convex dashboard to:
- Run test queries
- Check function logs
- Monitor real-time usage

### Health Check

Create a health check query:

```typescript
// convex/health.ts
export const check = query({
  handler: async (ctx) => {
    return { status: "ok", timestamp: Date.now() };
  },
});
```

## Rollback

If a deployment causes issues:

### Quick Rollback

Revert to a previous deployment from the dashboard:

1. Go to Deployments tab
2. Find the last working deployment
3. Click "Rollback to this deployment"

### Git-based Rollback

```bash
# Revert to previous commit
git revert HEAD

# Deploy the reverted code
bunx convex deploy
```

## Production Best Practices

### Rate Limiting

Configure rate limiting in your Convex functions:

```typescript
import { rateLimit } from "./lib/rateLimit";

export const sensitiveAction = mutation({
  handler: async (ctx) => {
    await rateLimit(ctx, "sensitive", 10); // 10 requests per minute
    // ... rest of function
  },
});
```

### Error Monitoring

Log errors for monitoring:

```typescript
export const myMutation = mutation({
  handler: async (ctx, args) => {
    try {
      // ... your code
    } catch (error) {
      console.error("Mutation failed:", error);
      throw error;
    }
  },
});
```

### Database Indexes

Ensure you have indexes for production queries:

```typescript
defineTable({
  userId: v.id("users"),
  createdAt: v.number(),
})
  .index("by_user", ["userId"])
  .index("by_created", ["createdAt"])
```

## Next Steps

After deploying Convex, [deploy your frontend](/docs/deployment/frontend-hosting).
